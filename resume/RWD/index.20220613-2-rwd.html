<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" href="css/listview-grid.css">
	<script src="js/jquery-2.1.0.min.js"></script>
	<script src="js/jquery.mobile-1.4.5.min.js"></script>
	<script>

		$(function(){
			$.ajax({
				type:"GET",
				url:"https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx",
				success: showdata,
				error: function(){
					alert("連線或資料取得錯誤! https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvTravelFood.aspx");
				}
			});
		});

		function showdata(data){
			console.log(data);
			$("#showmsg").empty();
			//渲染
			//$("#showmsg").html(data[i].Name);

			//全部店家名稱
			//substring (0,10)顯示0~10的字數
			
			for(var i=0; i<data.length; i++){	
			
				//$("#showmsg").append('<li><a href="#">'+data[i].Name+'</a></li>');
				var strHTML = ('<li><a href="https://www.google.com/maps/place/'+data[i].Address+'"target="_blank"><img src="'+data[i].PicURL+'"class="ui-li-thumb"><h1>'+data[i].Name+'</h1><p>'+data[i].Address+'</p><p>'+data[i].HostWords.substring(0,30)+'</p><p class="ui-li-aside">'+data[i].City+'</p></a></li>');
				$("#showmsg").append(strHTML)	;
			}
			$("#showmsg").listview("refresh");
		}	
	</script>


	
</head>
<body>
	<div data-role="page" id="home" class="my-page"data-theme="b">
			<div data-role="header" data-theme="b">
				<h1>把opendata資料套入RWD裡面</h1>
			</div>
			<div role="main" class="ui-content">
					<ul data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="輸入要搜尋的商家~"id="showmsg" >
						<li>
							<a href="#">								
								<img src="http://fakeimg.pl/350x200/00CED1/FFF/?text=img+placeholder"class="ui-li-thumb">
								<h1>商家名稱</h1>
								<p>顯示店家是否可使用信用卡<p>
								<p>地址</p>
								<p>簡介</p>								
								<p class="ui-li-aside">台中市</p>
							</a>
							<a href="tel:0423212354" data-icon="phone">0423212354</a>	
						</li>
					</ul>
						
			
			</div>
	
</body>
</html>
